defmodule Persian do
    @moduledoc """
    Convert word to persian.  use Persian.fix/1
  """
    @corrections [
        %{ list: ["Ø†","Ø‡","Øˆ","Ø‰","ØŠ","Ø","ØŽ","Ø","Ø‘","Ø’","Ø“","Ø”","Ø•",
            "Ø–","Ø˜","Ø™","Øš","Øž","Ù–","Ù—","Ù˜","Ù™","Ùš","Ù›","Ùœ","Ù","Ùž","ÙŸ","Ùª",
            "Ù¬","Ù­","Û","Û‚","Ûƒ","Û”","Û–","Û—","Û˜","Û™","Ûš","Û›","Ûœ","Ûž","ÛŸ","Û ",
            "Û¡","Û¢","Û£","Û¤","Û¥","Û¦","Û§","Û¨","Û©","Ûª","Û«","Û¬","Û­","Û®","Û¯","ï®§",
            "ï®²","ï®³","ï®´","ï®µ","ï®¶","ï®·","ï®¸","ï®¹","ï®º","ï®»","ï®¼","ï®½","ï®¾","ï®¿","ï¯€","ï¯","ï±ž",
            "ï±Ÿ","ï± ","ï±¡","ï±¢","ï±£","ï¹°","ï¹±","ï¹²","ï¹³","ï¹´","ï¹¶","ï¹·","ï¹¸","ï¹¹","ï¹º","ï¹»","ï¹¼","ï¹½",
            "ï¹¾","ï¹¿"], rep: ""},

    %{list:  ["Ø£","Ø¥","Ù±","Ù²","Ù³","Ùµ","Ý³","Ý´","ï­","ï­‘","ïºƒ","ïº„","ïº‡","ïºˆ",
            "ïº","ïºŽ","ðžº€","ï´¼","ï´½","ðž¸€"], rep: "Ø§"},
    
    %{list: ["Ù®","Ý•","Ý–","ï­’","ï­“","ï­”","ï­•","ïº","ïº","ïº‘","ïº’","ðž¸","ðž¸œ",
            "ðž¸¡","ðž¹¡","ðž¹¼","ðžº","ðžº¡"], rep: "Ø¨"},
    
    %{list: ["Ú€","Ý","Ý”","ï­–","ï­—","ï­˜","ï­™","ï­š","ï­›","ï­œ","ï­"], rep: "Ù¾"},
    %{list: ["Ù¹","Ùº","Ù»","Ù¼","Ý“","ï­ž","ï­Ÿ","ï­ ","ï­¡","ï­¢","ï­£","ï­¤","ï­¥",
            "ï­¦","ï­§","ï­¨","ï­©","ïº•","ïº–","ïº—","ïº˜","ðž¸•","ðž¸µ","ðž¹µ","ðžº•","ðžºµ"], rep: "Øª"}, 
    %{list: ["Ù½","Ù¿","Ý‘","ïº™","ïºš","ïº›","ïºœ","ðž¸–","ðž¸¶","ðž¹¶","ðžº–","ðžº¶"],  rep: "Ø«"},
    %{list: ["Úƒ","Ú„","ï­²","ï­³","ï­´","ï­µ","ï­¶","ï­·","ï­¸","ï­¹","ïº","ïºž","ïºŸ",
            "ïº ","ðž¸‚","ðž¸¢","ðž¹‚","ðž¹¢","ðžº‚","ðžº¢"], rep: "Ø¬"}, 
    %{list: ["Ú‡","Ú¿","Ý˜","ï­º","ï­»","ï­¼","ï­½","ï­¾","ï­¿","ï®€","ï®",
            "ðž¸ƒ","ðžºƒ"], rep: "Ú†"}, 
    %{list: ["Ú","Ý®","Ý¯","Ý²","Ý¼","ïº¡","ïº¢","ïº£","ïº¤","ðž¸‡","ðž¸§","ðž¹‡","ðž¹§",
            "ðžº‡","ðžº§"], rep: "Ø­"}, 
    %{list: ["Ú‚","Ú…","Ý—","ïº¥","ïº¦","ïº§","ïº¨","ðž¸—","ðž¸·","ðž¹—","ðž¹·","ðžº—","ðžº·"], rep: "Ø®"}, 
    %{list: ["Úˆ","Ú‰","ÚŠ","ÚŒ","Ú","ÚŽ","Ú","Ú","Ý™","Ýš","ïº©","ïºª","ðžº£","ï®‚",
            "ï®ƒ","ï®ˆ","ï®‰"], rep: "Ø¯"}, 
    %{list: ["ï±›","ï±","ïº«","ïº¬","ðž¸˜","ðžº˜","ðžº¸","ï®„","ï®…","ï®†","ï®‡"], rep: "Ø°"}, 
    %{list: ["Ù«","Ú‘","Ú’","Ú“","Ú”","Ú•","Ú–","Ý›","Ý¬","ï®Œ","ï®","ï±œ","ïº­","ïº®",
            "ðž¸“","ðžº“","ðžº³"], rep: "Ø±"}, 
    %{list: ["Ú—","Ú™","Ý«","Ý±","ïº¯","ïº°","ðž¸†","ðžº†","ðžº¦"], rep: "Ø²"}, 
    %{list: ["ï®Š","ï®‹","Ú˜"], rep: "Ú˜"}, 
    %{list: ["Úš","Ý½","Ý¾","ïº±","ïº²","ïº³","ïº´","ðž¸Ž","ðž¸®","ðž¹Ž","ðž¹®","ðžºŽ","ðžº®"], rep: "Ø³"}, 
    %{list: ["Ú›","Ûº","Ýœ","Ý­","Ý°","ïºµ","ïº¶","ïº·","ïº¸","ðž¸”","ðž¸´","ðž¹”","ðž¹´",
            "ðžº”","ðžº´"], rep: "Ø´"}, 
    %{list: ["Ú","ïº¹","ïºº","ïº»","ïº¼","ðž¸‘","ðž¹‘","ðž¸±","ðž¹±","ðžº‘","ðžº±"], rep: "Øµ"}, 
    %{list: ["Úž","Û»","ïº½","ïº¾","ïº¿","ï»€","ðž¸™","ðž¸¹","ðž¹™","ðž¹¹","ðžº™","ðžº¹"], rep: "Ø¶"}, 
    %{list: ["ï»","ï»‚","ï»ƒ","ï»„","ðž¸ˆ","ðž¹¨","ðžºˆ","ðžº¨"], rep: "Ø·"}, 
    %{list: ["ÚŸ","ï»…","ï»†","ï»‡","ï»ˆ","ðž¸š","ðž¹º","ðžºš","ðžºº"], rep: "Ø¸"}, 
    %{list: ["Ø","Ú ","ï»‰","ï»Š","ï»‹","ï»Œ","ðž¸","ðž¸¯","ðž¹","ðž¹¯","ðžº","ðžº¯"], rep: "Ø¹"}, 
    %{list: ["Û¼","Ý","Ýž","ÝŸ","ï»","ï»Ž","ï»","ï»","ðž¸›","ðž¸»","ðž¹›","ðž¹»","ðžº›",
            "ðžº»"], rep: "Øº"}, 
    %{list: ["Ø‹","Ú¡","Ú¢","Ú£","Ú¤","Ú¥","Ú¦","Ý ","Ý¡","ï­ª","ï­«","ï­¬","ï­­",
            "ï­®","ï­¯","ï­°","ï­±","ï»‘","ï»’","ï»“","ï»”","ðž¸","ðž¸ž","ðž¸°","ðž¹°","ðž¹¾","ðžº","ðžº°"], rep: "Ù"}, 
    %{list: ["Ù¯","Ú§","Ú¨","ï»•","ï»–","ï»—","ï»˜","ðž¸’","ðž¸Ÿ","ðž¸²","ðž¹’","ðž¹Ÿ","ðž¹²",
            "ðžº’","ðžº²","Øˆ"], rep: "Ù‚"}, 
    %{list: ["Ø»","Ø¼","Ùƒ","Úª","Ú«","Ú¬","Ú­","Ú®","Ý¢","Ý£","Ý¤","Ý¿","ï®Ž",
            "ï®","ï®","ï®‘","ï¯“","ï¯”","ï¯•","ï¯–","ï»™","ï»š","ï»›","ï»œ","ðž¸Š","ðž¸ª","ðž¹ª"], rep: "Ú©"}, 
    %{list: ["Ú°","Ú±","Ú²","Ú³","Ú´","ï®’","ï®“","ï®”","ï®•","ï®–","ï®—","ï®˜","ï®™","ï®š",
            "ï®›","ï®œ","ï®"], rep: "Ú¯"}, 
    %{list: ["Úµ","Ú¶","Ú·","Ú¸","Ýª","ï»","ï»ž","ï»Ÿ","ï» ","ðž¸‹","ðž¸«","ðž¹‹","ðžº‹",
            "ðžº«"], rep: "Ù„"}, 
    %{list: ["Û¾","Ý¥","Ý¦","ï»¡","ï»¢","ï»£","ï»¤","ðž¸Œ","ðž¸¬","ðž¹¬","ðžºŒ","ðžº¬"], rep: "Ù…"}, 
    %{list: ["Ú¹","Úº","Ú»","Ú¼","Ú½","Ý§","Ý¨","Ý©","ï®ž","ï®Ÿ","ï® ","ï®¡","ï»¥","ï»¦",
            "ï»§","ï»¨","ðž¸","ðž¸","ðž¸­","ðž¹","ðž¹","ðž¹­","ðžº","ðžº­"], rep: "Ù†"}, 
    %{list: ["Ø¤","Ù¶","Ù·","Û„","Û…","Û†","Û‡","Ûˆ","Û‰","ÛŠ","Û‹","Û","Ý¸","Ý¹",
            "ï¯—","ï¯˜","ï¯™","ï¯š","ï¯›","ï¯œ","ï¯","ï¯ž","ï¯Ÿ","ï¯ ","ï¯¡","ï¯¢","ï¯£","ïº…","ïº†","ï»­","ï»®",
            "ðž¸…","ðžº…","ðžº¥"], rep: "Ùˆ"}, 
    %{list: ["Ø©","Ú¾","Û€","Û•","Û¿","ï®¤","ï®¥","ï®¦","ï®©","ï®¨","ï®ª","ï®«","ï®¬","ï®­",
            "ïº“","ïº”","ï»©","ï»ª","ï»«","ï»¬","ðž¸¤","ðž¹¤","ðžº„"], rep: "Ù‡"}, 
    %{list: ["Ø ","Ø¦","Ø½","Ø¾","Ø¿","Ù‰","ÙŠ","Ù¸","Û","ÛŽ","Û","Û‘","Û’","Û“",
            "Ýµ","Ý¶","Ý·","Ýº","Ý»","ï®¢","ï®£","ï®®","ï®¯","ï®°","ï®±","ï¯¤","ï¯¥","ï¯¦","ï¯§","ï¯¨",
            "ï¯©","ï¯¼","ï¯½","ï¯¾","ï¯¿","ïº‰","ïºŠ","ïº‹","ïºŒ","ï»¯","ï»°","ï»±","ï»²","ï»³","ï»´","ðž¸‰","ðž¸©",
            "ðž¹‰","ðž¹©","ðžº‰","ðžº©"], rep: "ÛŒ"}, 
    %{list: ["Ù´","Û½","ïº€"], rep: "Ø¡"}, 
    %{list: ["ï»µ","ï»¶","ï»·","ï»¸","ï»¹","ï»º","ï»»","ï»¼"], rep: "Ù„Ø§"}]



  defp fix_char(char) do
      case (@corrections |> Enum.filter(fn(data) -> 
        data.list |> Enum.find_index(fn(c) -> 
            c == char
        end) != nil
    end) |> List.last) do
            nil ->
                char
            [] ->
                char
            l ->
                l.rep
        end
  end

  defp get_word_chars(word) do
      for i <- 1..(word |> String.length) do
          word 
            |> String.slice(i-1, 1)

       end |> Enum.map(fn(x) ->  x |> fix_char end)
  end


  def fix(word) do
        word |> get_word_chars |> Enum.join
  end



end
